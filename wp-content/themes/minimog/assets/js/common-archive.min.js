!function(d){"use strict";var s=d("body"),c=d(".page-sidebar"),m=window.minimog.Helpers,u="collapsed",g="sidebar-widgets-collapsible";function t(){d(".minimog-wp-widget-product-layered-nav-dropdown").each(function(){var e=d(this);e.selectWoo({placeholder:e.data("placeholder"),minimumResultsForSearch:5,width:"100%",allowClear:!e.attr("multiple"),language:{noResults:function(){return $minimog.i18l.noMatchesFound}}}).on("select2:unselecting",function(e){d(this).on("select2:opening.cancelOpen",function(e){e.preventDefault(),d(this).off("select2:opening.cancelOpen")})})})}function r(e,t,n,o){var i=d("#archive-layout-switcher");i.length<=0||0<(i=i.find(".switcher-item[data-columns="+o+"]")).length&&(i.siblings().removeClass("selected"),i.addClass("selected"))}function h(e,t={}){var r=d.extend(!0,{},{loadMore:0,scrollTop:0},t),n=(e=decodeURIComponent(e),r.loadMore||history.pushState({},null,e),d(".shop-load-more-button"));d(document.body).trigger("minimog_getting_product"),d.ajax({url:e,type:"GET",dataType:"html",success:function(e){for(var t=d(e),e=d("#minimog-main-post"),n=(r.loadMore||e.children(".minimog-grid").children(".grid-item").remove(),t.find("#minimog-main-post .grid-item")),o=(e.MinimogGridLayout("update",n),[".woocommerce-result-count",".woocommerce-pagination","#active-filters-bar"]),i=(d(".minimog-wp-widget-filter").each(function(){var e=d(this).attr("id");o.push("#"+e)}),o.length),a=0;a<i;a++){var l=o[a],s=d(l);0<s.length&&(s.empty(),0<(l=t.find(l)).length&&s.html(l.html()))}d(document.body).trigger("minimog_get_product_fragments_loaded"),r.scrollTop&&(n=e.offset().top,n-=198,n=Math.max(0,n),d("html, body").animate({scrollTop:n},300)),c.each(function(){var e=d(this);e.hasClass(g)&&e.find(".widget:not(."+u+")").find(".widget-content").stop().slideDown(250)}),d.fn.perfectScrollbar&&!m.isHandheld()&&c.find(".widget-scrollable").each(function(){d(this).find(".widget-content-inner").perfectScrollbar("update")})},beforeSend:function(){r.loadMore?m.setElementHandling(n):m.setBodyHandling()},complete:function(){r.loadMore?m.unsetElementHandling(n):m.setBodyCompleted()}})}d(document).ready(function(){var e,n,o,i,a,l;e=d("#archive-layout-switcher"),n=d(".minimog-main-post"),o="selected",e.on("click",".switcher-item",function(e){e.preventDefault();e=d(this);if(!e.hasClass(o)){e.siblings().removeClass(o),e.addClass(o);var e=e.data("layout"),t={};switch(n.addClass("layout-switching"),e){case"grid-one":t.columns=1,t.disableColumnChange=!0,n.addClass("style-list");break;case"grid-two":t.columns=2,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-three":t.columns=3,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-four":t.columns=4,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-five":t.columns=5,t.disableColumnChange=!1,n.removeClass("style-list")}n.MinimogGridLayout("updateLayout",t),n.on("MinimogGridLayoutResized",function(){n.removeClass("layout-switching")})}}),c.length<=0||(c.find(".widget").each(function(){var e=d(this);if(e.hasClass("widget_block"))return!0;e.children().not(".widget-title, .widgettitle, .widget-instance, .widget-content").wrapAll('<div class="widget-content"><div class="widget-content-inner"></div></div>'),e.hasClass("widget-scrollable")&&d.fn.perfectScrollbar&&!m.isHandheld()&&e.find(".widget-content-inner").perfectScrollbar()}),c.each(function(){var e=d(this);e.hasClass(g)&&e.on("click",".widget-title, .widgettitle",function(e){var t=d(this).closest(".widget");t.hasClass(u)?(t.removeClass(u),t.find(".widget-content").stop().slideDown(250)):(t.addClass(u),t.find(".widget-content").stop().slideUp(250))})})),"infinite"===(l=d(".woocommerce-pagination")).data("type")&&(i=0,(a=d(window)).on("scroll",function(){var e,t=d(this).scrollTop();i<t&&(e=a.height(),e=parseInt(.9*e),l.offset().top+l.outerHeight(!0)-e<=t&&((e=l.find(".shop-load-more-button")).hasClass("updating-icon")||e.trigger("click"))),i=t})),t(),d(document.body).on("MinimogGridLayoutColumnsChange",r),d(document.body).on("click",".minimog-wp-widget-filter .filter-link",function(e){e.preventDefault();var e=d(this),t=e.parent("li"),n=e.closest("ul"),o=e.attr("href");if(n.hasClass("single-choice")){if(t.hasClass("chosen"))return;t.addClass("chosen").siblings().removeClass("chosen")}else e.parent("li").toggleClass("chosen");n=d(this).closest(".page-sidebar");0<n.length&&(s.removeClass("off-sidebar-opened"),n.removeClass("off-sidebar-active"),m.unsetBodyOverflow()),h(o)}),d(document.body).on("click",".js-product-filter-link",function(e){e.preventDefault();e=d(this);e.hasClass("disabled")||h(e.attr("href"))}),d(document.body).on("change",".minimog-wp-widget-product-layered-nav-dropdown",function(){var e=d(this).closest("form"),t=e.find(".filter-name"),n=d(this).val();t.val(n),e.trigger("submit")}),d(document.body).on("submit",".minimog-wp-widget-product-layered-nav-form",function(){var e=d(this),t=e.find(".filter-name"),n=e.find(".filter-query-type"),o=t.val(),e=e.attr("action"),e=m.addUrlParam(e,t.attr("name"),o);return h(e=0<n.length?""===o?m.removeUrlParam(e,n.attr("name")):m.addUrlParam(e,n.attr("name"),n.val()):e),!1}),d(document.body).on("click",".woocommerce-pagination a.page-numbers",function(e){e.preventDefault(),h(d(this).attr("href"),{scrollTop:1})}),d(document.body).on("click",".shop-load-more-button",function(e){e.preventDefault(),h(d(this).attr("data-url"),{loadMore:1})}),d(document.body).on("change",".js-product-ordering select.orderby",function(){h(m.addUrlParam(window.location.href,"orderby",d(this).val()))})}),d.fn.selectWoo&&(d(document).ready(function(){t()}),d(document.body).on("minimog_get_product_fragments_loaded",t))}(jQuery);