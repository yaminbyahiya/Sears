!function(o){"use strict";var r=window.minimog.Helpers;function e(t,i=!1){t=decodeURIComponent(t);var e=new URL(t),e=e.pathname+e.search,t=(i||history.pushState({},null,t),r.getUrlParamsAsObject(t)),e=(t.action="minimog_get_posts",t.base_url=e,o("#minimog-main-post-query")),e=(0<e.length&&(e=e.data("query"),jQuery.extend(t,e)),o(".minimog-wp-widget-filter")),a=[],n=(e.each(function(){var t,e=o(this).attr("id"),n=o(this).find(".widget-instance");0<n.length&&(t=n.data("instance"),n=n.data("name"),a.push({id:"#"+e,name:n,instance:t}))}),t.widgets=a,o(".archive-load-more-button"));o.ajax({url:$minimog.ajaxurl,type:"GET",data:t,dataType:"json",cache:!0,success:function(t){var e=o("#minimog-main-post"),n=(i||e.children(".minimog-grid").children(".grid-item").remove(),t.template),n=o(o.parseHTML(n));e.MinimogGridLayout("update",n),t.fragments&&(o.each(t.fragments,function(t,e){o(t).empty(),""!==e&&(e=o(o.parseHTML(e)),o(t).html(e.html()))}),o.fn.perfectScrollbar&&!r.isHandheld()&&o(".page-sidebar").find(".widget-scrollable").each(function(){o(this).find(".widget-content-inner").perfectScrollbar("update")}),o(document.body).trigger("minimog_get_product_fragments_loaded"))},beforeSend:function(){i?r.setElementHandling(n):r.setBodyHandling()},complete:function(){i?r.unsetElementHandling(n):r.setBodyCompleted()}})}o(document).ready(function(){var n,i,a;"infinite"===(a=o(".minimog-grid-pagination")).data("type")&&(n=0,(i=o(window)).on("scroll",function(){var t,e=o(this).scrollTop();n<e&&(t=.9*i.height(),t=parseInt(t),a.offset().top+a.outerHeight(!0)-t<=e&&((t=a.find(".archive-load-more-button")).hasClass("updating-icon")||t.trigger("click"))),n=e})),o(document.body).on("click",".minimog-grid-pagination a.page-numbers",function(t){t.preventDefault();t=o(this).attr("href");e(window.location.origin+t)}),o(document.body).on("click",".archive-load-more-button",function(t){t.preventDefault();t=o(this).attr("data-url");e(window.location.origin+t,!0)})})}(jQuery);