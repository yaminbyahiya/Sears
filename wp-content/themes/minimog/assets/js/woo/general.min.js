!function(l){"use strict";var t=l(window),r=l("body"),f=window.minimog.Helpers;function o(t,a,e,i,n){n=n.parents(".row-isw-swatch").first();(n.hasClass("row-isw-swatch--isw_color")||n.hasClass("row-isw-swatch--isw_image"))&&n.find(".selected-term-name").html(i)}function s(t,a){var e=t.find(".product-container"),i=e.find(".woo-single-info"),n=e.find(".woo-single-images"),r=t.find(".cart.variations_form"),r=(0<r.length&&"undefined"!=typeof wc_add_to_cart_variation_params&&(r.wc_variation_form(),"undefined"!=typeof isw&&void 0!==isw.Swatches&&isw.Swatches.register(r)),n.children(".woo-single-gallery")),o={},r=(r.hasClass("has-thumbs-slider")&&(o={thumbs:{swiper:r.children(".minimog-thumbs-swiper").MinimogSwiper()}}),r.children(".minimog-main-swiper")),r=(0<r.length&&r.MinimogSwiper(o),n.height()),o=r,n=r,s=window.innerHeight-60,d=e.data("quick-view"),c=2*d.spacing,r=(d.imageCover?(i=e.find(".quick-view-col-summary .inner-content"),o=r+c,n=Math.min(s,o),0<d.spacing?n-=c:n-=60):(o=r+c,n=Math.min(s,o),n-=c),i.outerHeight(parseInt(n)),l.fn.perfectScrollbar&&!f.isHandheld()&&i.perfectScrollbar({suppressScrollX:!0}),d.imageCover&&e.find(".woo-single-images").addClass("image-cover"),t.find(".variations_form")),s=r.find(".row-isw-swatch-quantity-wrap");r.find('select[name="quantity"]').MinimogNiceSelect({renderTarget:s}),t.data("minimogModal")?t.MinimogModal("open"):t.MinimogModal({perfectScrollbar:!1}),a.removeClass("loading")}l(document).ready(function(){l(document.body).on("click",".modal-quick-view-popup .woosw-btn",function(){var t=l(this).closest(".modal-quick-view-popup");0<t.length&&l.fn.MinimogModal&&t.MinimogModal("close")}),l(".minimog-product").on("click",".quick-view-btn",function(t){t.preventDefault(),t.stopPropagation();var a,e=l(this);e.hasClass("loading")||l.fn.MinimogModal&&(e.addClass("loading"),t=e.data("pid"),0<(a=r.children("#modal-quick-view-product-"+t)).length?s(a,e):l.ajax({url:$minimog.ajaxurl,type:"GET",data:l.param({action:"product_quick_view",pid:t}),dataType:"json",cache:!0,success:function(t){a=l(t.template),r.append(a),s(a,e)}}))}),function(){if("undefined"==typeof wc_add_to_cart_params)return;l(document).on("click",".ajax_add_variation_to_cart",function(t){t.preventDefault(),t.stopPropagation();var a=l(this),t=a.data("quantity"),e=0,i={},n=a.siblings('select[name="product_variation_id"]');if(0<n.length){n=n.children(":selected"),e=n.data("variation-id"),i=n.val();i=JSON.parse(i)}else{n=a.parents(".product").first().find(".variations_form");if(0<n.length){var r=!0;if(n.find("select[name^=attribute]").each(function(){var t=l(this),a=t.attr("name"),t=t.val();0===t.length?r=!1:i[a]=t}),!r)return window.alert("Please select a product option before adding this product to your cart."),!1;e=n.find(".variation_id").val()}}return e&&i?(a.removeClass("added").addClass("loading updating-icon"),i.quantity=t,i.product_id=e,l("body").trigger("adding_to_cart",[a,i]),l.post(f.getAjaxUrl("woocommerce_add_to_cart"),i,function(t){t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:l(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]))}).always(function(){a.addClass("added").removeClass("loading updating-icon")})):window.alert("Please select a product option before adding this product to your cart."),!1})}(),function(){if("undefined"==typeof wc_add_to_cart_params)return;l(document).on("click","button.single_add_to_cart_button.ajax_add_to_cart",function(t){t.preventDefault();var a,e,i,n,r=l(this);return!r.hasClass("disabled")&&(!r.hasClass("woosb-disabled")&&(a=(t=r.closest("form.cart")).find("[name=add-to-cart]").val(),e=t.find("input[name=variation_id]").val(),i=t.find(".quantity .qty[name=quantity]").val(),void(0!==(a="add-to-cart"===r.attr("name")?r.val():a)&&(n={product_id:a,variation_id:e},t.serializeArray().map(function(t){var a;"add-to-cart"!==t.name&&(t.name.endsWith("[]")?((a=t.name.substring(0,t.name.length-2))in n||(n[a]=[]),n[a].push(t.value)):n[t.name]=t.value)}),r.attr("data-qty")&&(i=parseInt(r.attr("data-qty"))),n.quantity=i,r.removeClass("added").addClass("loading updating-icon"),l("body").trigger("adding_to_cart",[r,n]),l.post(f.getAjaxUrl("woocommerce_add_to_cart"),n,function(t){var a;t&&(t.error&&t.product_url?window.location=t.product_url:(a=r.data("redirect"))&&""!==a?window.location=a:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:l(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,r]))}).always(function(){r.addClass("added").removeClass("loading updating-icon")})))))})}(),l(document.body).on("click",".js-product-variation-term",function(t){t.preventDefault();t=l(this);if(!t.hasClass("selected")){var a=t.parents(".loop-product-variation-selector").first();if(!(a.length<=0)){var e=a.closest(".product"),i=a.data("product_attribute"),n=a.data("product_variations"),a=a.data("product_variations_images"),r=!1,o=(t.siblings().removeClass("selected"),t.addClass("selected"),t.data("term")),t=e.find("select[name="+i+"]");0<t.length&&t.val(o).trigger("change");for(var s=n.length-1;0<=s;s--){var d=n[s];d.attributes&&Object.entries(d.attributes).forEach(([t,a])=>{i===t&&a===o&&(r=d)})}!1!==r&&(t=a[r.variation_id],e.find(".product-main-image img").attr("src",t),""!==(a=r.price_html)&&e.find(".price").replaceWith(a))}}}),l(".loop-product-variation-selector").each(function(){l(this).find(".term-link").first().trigger("click")}),l(".widget_product_categories").each(function(){var t=l(this),i="opened",t=(t.find(".cat-parent").each(function(){var t=l(this),a=l(this).children("a").clone(),e=$minimog.i18l.all,i=l('<li class="cat-item cat-item-all"></li>'),e=e.replace("%s",a.html());a.html(e),t.hasClass("current-cat")&&(t.removeClass("current-cat"),t.addClass("current-cat-parent"),i.addClass("current-cat")),i.append(a),l(this).children(".children").prepend(i)}),t.on("click","a",function(t){t.stopPropagation();var a=l(this),e=a.parent("li"),a=a.siblings(".children");0<a.length&&(t.preventDefault(),e.hasClass(i)?(e.removeClass(i),e.find("."+i).removeClass(i),a.stop().slideUp(250)):(e.siblings("."+i).removeClass(i).children(".children").stop().slideUp(250),e.addClass(i),a.stop().slideDown(250)))}),t.on("click","li.cat-parent",function(t){l(this).children("a").trigger("click")}),t.find(".current-cat-parent, .current-cat"));t.addClass(i),t.children(".children").stop().slideDown(250)});var a,i=l(".page-sidebar"),n=(l(document).on("click",".btn-js-open-off-sidebar",function(t){t.preventDefault();var t=l(this),t=i.filter(".sidebar-"+t.data("sidebar-target"));0<t.length&&(t.addClass("off-sidebar-active"),r.addClass("off-sidebar-opened"),f.setBodyOverflow(),(t=t.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),l.fn.perfectScrollbar&&!f.isHandheld()&&t.perfectScrollbar({suppressScrollX:!0}))}),l(document).on("click",".btn-close-off-sidebar",function(t){t.preventDefault(),r.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),f.unsetBodyOverflow()}),i.on("click",function(t){t.target===this&&(r.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),f.unsetBodyOverflow())}),991);function e(){var t,a,e=i.filter(".sidebar-off-mobile");window.innerWidth<=n?(e.addClass("sidebar-switching sidebar-off"),(t=e.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),l.fn.perfectScrollbar&&!f.isHandheld()&&t.perfectScrollbar({suppressScrollX:!0})):(e.addClass("sidebar-switching").removeClass("sidebar-off"),r.removeClass("off-sidebar-opened"),f.unsetBodyOverflow(),a=(t=e.find(".page-sidebar-content-wrap")).data("perfectScrollbar"),t.css("height","auto"),l.fn.perfectScrollbar&&a&&a.destroy()),setTimeout(function(){e.removeClass("sidebar-switching")},350)}(r.hasClass("page-sidebar1-off-mobile")||r.hasClass("page-sidebar2-off-mobile"))&&(a=window.innerWidth,e(),t.on("resize",function(){var t=!0;a!==window.innerWidth&&(t=!(a<=n&&window.innerWidth<=n||n<a&&window.innerWidth>n)&&t)&&e(),a=window.innerWidth})),r.on("isw_selected",o),l(document.body).on("change",".product-variation-select",function(){var t=l(this).parents(".minimog-variation-select-wrap").find(".variations_form"),a=l(this).val();if(""!==a){var e=JSON.parse(a);for(const i in e)t.find('select[name="'+i+'"]').val(e[i]).trigger("change")}else t.find(".reset_variations").trigger("click")}),l("body").on("change",'input[name="payment_method"], #billing_country, #shipping_country, #shipping_state, #billing_state',function(){setTimeout(function(){l("body").trigger("update_checkout")},2e3)}),l(document.body).on("show_variation",".variations_form",function(t,a){var e=l(this),i=e.find('input[name="variation_id"]').val();i&&(e.find(".wad-qty-pricing-table").hide(),e.find('.wad-qty-pricing-table[data-id="'+i+'"]').show())})}),l(document).on("found_variation",".variations_form",function(t,a){t=l(t.target).closest(".entry-summary").children(".entry-price-wrap").find(".price");a.price_html?f.setContentHTML(t,l(a.price_html).html()):f.resetContentHTML(t)}),l(document).on("hide_variation",".variations_form",function(t,a){t=l(t.target).closest(".entry-summary").children(".entry-price-wrap").children(".price");f.resetContentHTML(t)}),l(document).on("change.wc-variation-form",".variations select",function(t){t=l(t.currentTarget);t.closest(".variations_form").find(".variations select").not(t).each(function(){if(2===l(this).children("option").length){var t=l(this).children("option:eq(1)").val();if(l(this).val()!==t)return l(this).val(t).trigger("change"),l(this).siblings(".isw-swatch").find(".isw-term").removeClass("isw-selected").filter('[data-term="'+t+'"]').addClass("isw-selected"),!0}})})}(jQuery);