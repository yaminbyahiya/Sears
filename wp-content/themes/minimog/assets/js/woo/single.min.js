!function(_){"use strict";var v=_("body"),S=window.minimog.Helpers;function k(t,e,i,o,n){n=n.parents(".row-isw-swatch").first();n.hasClass("row-isw-swatch--isw_select")||n.find(".selected-term-name").html(o)}_(document).ready(function(){var e,i,t,o,n,a,s,l,r,c,m,d,g,h;if((h=_(".woo-single-gallery")).length<=0||(!$minimog.isSingle||"product"!==$minimog.postType||"slider"!==$minimogProductSingle.featureStyle&&"slider-02"!==$minimogProductSingle.featureStyle&&"carousel"!==$minimogProductSingle.featureStyle||(a={},h.hasClass("has-thumbs-slider")&&(o=h.find(".minimog-thumbs-swiper").MinimogSwiper(),a={thumbs:{swiper:o,autoScrollOffset:1}}),h.children(".minimog-main-swiper").MinimogSwiper(a)),_.fn.lightGallery&&h.hasClass("has-light-gallery")&&h.lightGallery(window.minimog.LightGallery)),"1"!==$minimogProductSingle.singleProductStickyBar||(e=_("#sticky-product-bar")).length<=0||(o=_(".entry-product form.cart").find(".single_add_to_cart_button"),i=_(".entry-product .entry-summary form.cart"),t=o.offset().top,o=e.outerHeight(),n="showing",v.css("--sticky-atc-bar-height",o+"px"),e.on("click",".sticky-product-bar-close",function(t){t.preventDefault(),e.addClass("hide"),v.css("--sticky-atc-bar-height",0)}),_(window).on("scroll",function(){_(this).scrollTop()>t?e.addClass(n):e.removeClass(n)}),_(document.body).on("click",".sticky-product-add_to_cart_button",function(t){t.preventDefault();t=i.offset().top-132;_("html, body").animate({scrollTop:t},600)})),(a=_("#commentform")).on("click",".comment-form__attachment-button",function(){_(this).closest(".comment-form").find(".comment-form-attachment__input").trigger("click")}),a.on("change",".comment-form-attachment__input",function(t){var e=_(this).closest(".comment-form").find(".comment-form__attachment-button"),i="",i=this.files&&1<this.files.length?$minimogProductSingle.i18n.filesSelected.replace("{count}",this.files.length):t.target.value.split("\\").pop();e.find(".button-text").text(i)}),h="1"===$minimog.light_gallery_download,d="1"===$minimog.light_gallery_auto_play,p="1"===$minimog.light_gallery_zoom,b="1"===$minimog.light_gallery_full_screen,f="1"===$minimog.light_gallery_share,s={selector:"a",mode:"lg-fade",thumbnail:"1"===$minimog.light_gallery_thumbnail,download:h,autoplay:d,zoom:p,share:f,fullScreen:b,hash:!1,animateThumb:!1,showThumbByDefault:!1,getCaptionFromTitleOrAlt:!1},_(".dco-attachment-gallery").each(function(){_(this).lightGallery(s)}),h=_(".js-text-collapsible"),l=h.closest(".minimog-tabs"),new Readmore(h,{moreLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readMore+"</a>",lessLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readLess+"</a>",afterToggle:function(t,e,i){0<l.length&&l.MinimogTabPanel("updateLayout")}}),d=_("#woo-single-info .entry-summary > .variations_form"),r=d.siblings(".woobt-wrap").find(".woobt-product-this"),d.find("select").on("change",function(){var t=_(this),e=t.attr("name"),t=t.val();r.find('.variations_form select[name="'+e+'"]').val(t).trigger("change")}),_.fn.perfectScrollbar&&!S.isHandheld()&&_(".woobt-products-wrap").perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),"product"===$minimog.postType){var u=$minimog.postID,p="recent_viewed_products",f=S.getCookie(p),b=u;if(""!==f){for(var w=f.split(","),y=0;y<w.length;y++)for(;w[y]==u;)w.splice(y,1);w.unshift(u),20<w.length&&w.slice(1,20),b=w.join()}S.setCookie(p,b,7)}(h=_("#live-viewing-visitors")).length<=0||({min:c,max:m,duration:d}=h.data("settings"),g=h.find(".count"),c=parseInt(c),m=parseInt(m),setInterval(function(){g.text(S.randomInteger(c,m))},d)),f=_(".minimog-size-guide__table-wrapper"),_.fn.perfectScrollbar&&0<f.length&&f.perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),v.on("isw_selected",k),_(".minimog-tabs").MinimogTabPanel(),_(document.body).on("click",".woobt-add-btn",function(t){t.preventDefault();var t="checked",e=_(this),i=e.attr("data-pid"),i=e.parents(".woobt-images").siblings(".woobt-products").find('.woobt-product[data-pid="'+i+'"]').find(".woobt-checkbox"),o=e.hasClass(t);e.toggleClass(t),i.prop("checked",!o),i.trigger("change")}),_(document.body).on("change",".woobt-layout-separate .woobt-checkbox",function(){var t=_(this),e=t.closest(".woobt-product"),i=e.data("pid"),t=t.prop("checked"),e=e.parents(".woobt-products").siblings(".woobt-images").find(".woobt-image-"+i).find(".woobt-add-btn");t?e.addClass("checked"):e.removeClass("checked")}),_(".modal-product-360").on("MinimogModalOpen",function(){var t,e=_(this).find(".product-spritespin");e.data("spritespin")||(t=_.extend({},{sense:-1,responsive:!0,animate:!1,plugins:["360","wheel","drag"]},e.data("spritespin-settings")),e.spritespin(t))})})}(jQuery);