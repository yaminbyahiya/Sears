var get_CurrentPosition={lat:null,lng:null,accuracy:null,init:function(){if("https:"!==window.location.protocol&&"127.0.0.1"!==window.location.host||!navigator.geolocation)return!1;navigator.geolocation.getCurrentPosition(get_CurrentPosition.set_LatLng)},print_Error:function(o){},set_LatLng:function(o){get_CurrentPosition.lat=o.coords.latitude,get_CurrentPosition.lng=o.coords.longitude,get_CurrentPosition.accuracy=o.coords.accuracy},get_LatLng:function(){return{lat:get_CurrentPosition.lat,lng:get_CurrentPosition.lng}}};window.addEventListener("load",function(o){}),function(y,o){"use strict";var e={init:function(){o.hooks.addAction("frontend/element_ready/eac-addon-open-streetmap.default",e.widgetOpenStreetMap)},widgetOpenStreetMap:function(o){var e,o=o.find(".eac-open-streetmap"),l=o.find(".osm-map_wrapper"),s=l.find(".osm-map_wrapper-markercenter"),c=l.find(".osm-map_wrapper-marker"),d=o.find("#osm_nonce").val(),u=l.data("settings")||{},m=eacElementsPath.osmImages,g=eacElementsPath.proxies+"proxy_osm.php",o=eacElementsPath.osmConfig+"osmTiles.json",_={lat:null,lng:null,title:"",content:""},f=L.Icon.extend({options:{shadowUrl:m+"marker-shadow.png",shadowSize:[41,41],shadowAnchor:[17,41]}}),h=[];0!==Object.keys(u).length&&(fetch(g+"/?url="+encodeURIComponent(o)+"&id="+u.data_id+"&nonce="+d).then(function(o){return o.json()}).then(function(o){0<Object.keys(o).length?e(o):console.log("EAC OSM: File is empty")}).catch(function(o){console.log("EAC OSM: "+o.message)}),e=function(o){_.title=s.find(".osm-map_marker-title")[0].innerText,_.content=s.find(".osm-map_marker-content")[0].innerHTML,_.lat=s.data("lat"),_.lng=s.data("lng");var t={},a={};y.each(o,function(o,e){var n;e.url&&0<e.url.length&&e.options&&0<Object.keys(e.options).length&&(n=L.tileLayer(e.url,e.options),o=e.options.title||o,"tile"===(e.options.type||"tile")?t[o]=n:a[o]=n)});var p=L.map(u.data_id,{center:[_.lat,_.lng],layers:t[u.data_layer],closePopupOnClick:u.data_clickpopup,zoom:u.data_zoom,zoomControl:!u.data_zoompos}),e=L.control.layers(t,a,{collapsed:u.data_collapse_menu}).addTo(p);u.data_collapse_menu||(l.find(".leaflet-control-layers").on("mouseleave",function(){e.collapse()}),l.find(".leaflet-control-layers-toggle").on("mouseenter",function(){e.expand()})),l.find(".leaflet-control-layers-base").prepend("<label class='osm-map_layers-title'>Tiles Layer</label>"),l.find(".leaflet-control-layers-overlays").prepend("<label class='osm-map_layers-title'>Overlays</label>"),u.data_zoompos&&L.control.zoom({position:"bottomleft"}).addTo(p);var r,n,i=new f({iconUrl:m+"osm-icons/default.png",iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]});return L.marker([_.lat,_.lng],{icon:i}).addTo(p).bindPopup("<div class='osm-map_popup-title'>"+_.title+"</div><div class='osm-map_popup-content'>"+_.content+"</div>").openPopup(),h.push(L.marker(new L.LatLng(_.lat,_.lng))),u.data_import?""!==u.data_import_url&&(i=[(o=u.data_import_sizes.split(",").map(Number))[0]/2,o[1]],n=[0,-o[1]],r=new f({iconUrl:m+"osm-icons/"+u.data_import_icon,iconSize:o,iconAnchor:i,popupAnchor:n}),y.ajax({url:g,type:"GET",data:{url:encodeURIComponent(u.data_import_url),id:u.data_id,nonce:d}}).done(function(o,e,n){var t,a;o.type&&"FeatureCollection"===o.type?(t=u.data_keywords.includes(",")?u.data_keywords.split(","):[],a=L.geoJSON(o,{pointToLayer:function(o,e){return new L.Marker(e,{icon:r})},onEachFeature:function(r,o){var i;0<t.length&&(i="",y.each(t,function(o,e){var n=(e=e.split("|"))[0],t=2===e.length?e[1]:e[0];if(r.properties[n])try{var a=new URL(r.properties[n]);i+="<a href='"+a+"' target='_blank' rel='nofollow noopener noreferrer'>"+t+"</a><br/>"}catch{i+="<div class='osm-map_popup-content'><span class='osm-map_popup-label'>"+t+":</span><span class='osm-map_popup-value'> "+r.properties[n]+"</span></div>"}}),o.bindPopup(i))}}),a=L.markerClusterGroup().addLayer(a),p.addLayer(a).fitBounds(a.getBounds())):alert(JSON.stringify(o))}).fail(function(o,e,n){alert(n)})):(y.each(c,function(o,e){var n=y(e).data("lat"),t=y(e).data("lng"),a=y(e).data("icon"),r=y(e).find(".osm-map_marker-title")[0].innerText,i=y(e).find(".osm-map_marker-content")[0].innerHTML,l=y(e).data("sizes").split(",").map(Number),s=[l[0]/2,l[1]],e=[0,-l[1]],e=new f({iconUrl:m+"osm-icons/"+a,iconSize:l,iconAnchor:s,popupAnchor:e});L.marker([n,t],{icon:e}).addTo(p).bindPopup("<div class='osm-map_popup-title'>"+r+"</div><div class='osm-map_popup-content'>"+i+"</div>"),h.push(L.marker(new L.LatLng(n,t)))}),0<h.length&&u.data_zoomauto&&(n=L.featureGroup(h),p.fitBounds(n.getBounds(),{padding:[50,50]}))),!1===u.data_wheelzoom&&p.scrollWheelZoom.disable(),!1===u.data_dblclick&&p.doubleClickZoom.disable(),!1===u.data_draggable&&p.dragging.disable(),p})}};y(window).on("elementor/frontend/init",e.init)}(jQuery,window.elementorFrontend);